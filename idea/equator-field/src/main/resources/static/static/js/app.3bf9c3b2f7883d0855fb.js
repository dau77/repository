webpackJsonp([1],{"0rG2":function(e,t){},"4+Gg":function(e,t){},"5iBl":function(e,t){},"6DYt":function(e,t,n){"use strict";n("QmSG");var i={name:"Main",data:function(){return{username:"",navselected:"2"}},mounted:function(){this.username=sessionStorage.getItem("username")},methods:{getNavType:function(){this.navselected=this.$store.state.adminleftnavnum},selectItems:function(e){this.$store.state.adminleftnavnum=e},exit:function(){sessionStorage.setItem("token",""),this.$router.push({path:"/"})}},watch:{"$store.state.adminleftnavnum":"getNavType"}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"main"}},[n("el-container",{staticStyle:{height:"960px",border:"1px solid #eee"}},[n("el-header",[n("div",{staticStyle:{"text-align":"right"}},[n("span",[e._v("用户名："+e._s(e.username))]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.exit}},[e._v("exit")])],1)]),e._v(" "),n("el-container",[n("el-aside",{staticStyle:{"background-color":"rgb(238, 241, 246)"},attrs:{width:"200"}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":e.navselected,active:e.navselected},on:{select:e.selectItems}},[n("el-menu-item",{attrs:{index:"1"}},[n("i",{staticClass:"el-icon-document"}),e._v(" "),n("router-link",{attrs:{to:{name:"FieldAdd"},tag:"span"}},[e._v("field添加")])],1),e._v(" "),n("el-menu-item",{attrs:{index:"2"}},[n("i",{staticClass:"el-icon-setting"}),e._v(" "),n("router-link",{attrs:{to:{name:"FieldList"},tag:"span"}},[e._v("field列表")])],1)],1)],1),e._v(" "),n("el-main",{attrs:{height:"500"}},[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]},r=n("VU/8")(i,a,!1,null,null,null);t.a=r.exports},Dod7:function(e,t,n){"use strict";n.d(t,"b",function(){return m}),n.d(t,"a",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"e",function(){return v}),n.d(t,"c",function(){return g});var i=n("mvHQ"),a=n.n(i),r=n("//Fk"),l=n.n(r),o=n("7+uW"),s=n("mtWM"),u=n.n(s),f=n("Xprb"),d=this;o.default.prototype.$axios=u.a,u.a.defaults.withCredentials=!0;function c(){return sessionStorage.getItem("token_type")+" "+sessionStorage.getItem("token")}u.a.interceptors.response.use(function(e){return console.log("响应拦截器then:"+e.status),console.log("响应拦截器response.this:"+d),{status:e.status,message:f.a.message(e,"恭喜你，操作成功了！").message,response:e}},function(e){var t="";console.log("响应拦截器err："+e),console.log("响应拦截器err.this:"+d);var n=e.response.status;return 504==n||404==n?(console.log("服务器被吃了⊙﹏⊙∥"),t=f.a.message(e.response,"操作失败,服务器被吃了！")):401==n?(console.log("token过期"),t=f.a.message(e.response,"操作失败,response.data.error！"),location.replace("/"),console.log("router:"+d.$router)):403==n?(console.log("权限不足,请联系管理员!"),t=f.a.message(e.response,"操作失败,权限不足,请联系管理员！")):400==n?t=f.a.message(e.response,"操作失败,很遗憾，错误的请求!"):422==n?(console.log("语义错误,无法响应!"),t=f.a.message(e.response,"操作失败,语义错误,无法响应！")):t=f.a.message(e.response,"操作失败,未知错误！"),{status:n,message:t.message}});var m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.a(function(n,i){u()({method:"get",params:t,headers:{Authorization:c()},url:e}).then(function(e){200===e.status?n(e):i(e)}).catch(function(e){i(e)})})},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new l.a(function(n,i){u()({method:"delete",params:t,headers:{Authorization:c()},url:e}).then(function(e){200===e.status?n(e):(console.error(e),i(e))}).catch(function(e){i(e)})})},h=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3];return new l.a(function(n,i){u()({method:"post",data:a()(t),headers:{"Content-type":"application/json;charset=UTF-8",Authorization:c()},url:e}).then(function(e){200===e.status?n(e):(console.log("post.then.reject="+e),i(e))}).catch(function(e){console.log("post.catch.reject="+e),i(e)})})},v=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3];return new l.a(function(n,i){u()({method:"put",data:a()(t),headers:{"Content-type":"application/json;charset=UTF-8",Authorization:c()},url:e}).then(function(e){200===e.status?n(e):i(e)}).catch(function(e){i(e)})})},g=function(e,t){return new l.a(function(n,i){u()({method:"Post",data:t,headers:{"Content-type":"application/x-www-form-urlencoded",Authorization:"Basic Y2xpZW50XzI6MTIzNDU2"},url:e}).then(function(e){200===e.status?n(e):i(e)}).catch(function(e){i(e)})})}},FsNF:function(e,t){},Luci:function(e,t,n){"use strict";var i=n("Dod7"),a={name:"login",data:function(){return{userinfo:{username:"",password:""}}},methods:{login:function(){var e=this,t=n("mw3O").stringify({username:this.userinfo.username,password:this.userinfo.password,grant_type:"password"});Object(i.c)("oauth/token",t).then(function(t){console.log("success:"+t),200==t.status?(sessionStorage.setItem("token",t.response.data.access_token),sessionStorage.setItem("token_type",t.response.data.token_type),sessionStorage.setItem("username",e.userinfo.username),e.$message.success("["+t.status+"]"+t.message),e.$router.push({path:"/Main",query:{username:e.userinfo.username}})):e.$message.error("["+t.status+"]"+t.message)}).catch(function(t){console.log("err:"+t),e.$message.error("["+t.status+"]"+t.message)})}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("el-form",{ref:"userinfo",staticClass:"demo-ruleForm",attrs:{model:e.userinfo,"label-width":"100px","status-icon":""}},[n("el-form-item",{attrs:{label:"用户名"}},[n("el-input",{model:{value:e.userinfo.username,callback:function(t){e.$set(e.userinfo,"username",t)},expression:"userinfo.username"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码"}},[n("el-input",{attrs:{type:"password"},model:{value:e.userinfo.password,callback:function(t){e.$set(e.userinfo,"password",t)},expression:"userinfo.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登陆")])],1)],1)],1)},staticRenderFns:[]};var l=n("VU/8")(a,r,!1,function(e){n("ahdX")},null,null);t.a=l.exports},MBQ3:function(e,t,n){"use strict";var i={name:"fy-form",componentName:"FyForm",data:function(){return{}},props:{rules:Object,model:Object}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fy_form"},[n("el-form",{attrs:{"label-width":"100px",rules:e.rules,model:e.model}},[e._t("default")],2),e._v("\n    form.rules:"+e._s(e.rules)),n("br"),e._v("\n    form.model:"+e._s(e.model)),n("br")],1)},staticRenderFns:[]},r=n("VU/8")(i,a,!1,null,null,null).exports,l={name:"fy_form_item",componentName:"FyFormItem",data:function(){return{}},props:{lab:String,prop:String},methods:{}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fy_form_item"},[t("el-form-item",{attrs:{label:this.lab,prop:this.prop}},[this._t("default")],2),this._v("\n\n    item.value:"+this._s(this.lab)+"\n    item.prop:"+this._s(this.prop)+"\n")],1)},staticRenderFns:[]},s=n("VU/8")(l,o,!1,null,null,null).exports,u={name:"fy-input",componentName:"FyInput",data:function(){return{currentValue:void 0===this.value||null===this.value?"":this.value}},props:{value:String,placeholder:String},watch:{value:function(e){console.log("watch:"+watch)}},methods:{handleChange:function(e){var t=e;this.$emit("changeValue",t)}}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fy_input"},[n("el-input",{attrs:{placeholder:e.placeholder},on:{change:e.handleChange},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}},[e._t("default")],2),e._v("\n    value:"+e._s(e.value)+"\n    currentValue:"+e._s(e.currentValue)+"\n")],1)},staticRenderFns:[]},d=n("VU/8")(u,f,!1,null,null,null).exports,c=(n("Dod7"),{name:"FieldAdd",data:function(){return{fieldInfo:{field_name:""},rules:{field_name:[{required:!0,message:"用户名不能为空",trigger:"blur"}]}}},mounted:function(){this.$axios.get("http://192.168.11.245:18080/page_field/fieldAdd",{params:{}}).then(function(e){}).catch(function(e){})},methods:{zidingyi:function(e){this.fieldInfo.field_name=e}},components:{FyForm:r,FyFormItem:s,FyInput:d}}),m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"Test"},[t("fy-form",{ref:"fieldInfo",attrs:{rules:this.rules,model:this.fieldInfo}},[t("fy-form-item",{attrs:{lab:"字段名",prop:"field_name"}},[t("fy-input",{attrs:{model:this.fieldInfo.field_name,placeholder:"字段名1"},on:{changeValue:this.zidingyi}})],1)],1)],1)},staticRenderFns:[]},p=n("VU/8")(c,m,!1,null,null,null);t.a=p.exports},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("MU8w");var i=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var r=n("VU/8")({name:"App"},a,!1,function(e){n("5iBl")},null,null).exports,l=n("YaEn"),o=n("NYxO");i.default.use(o.a);var s=new o.a.Store({state:{count:0,isLogin:0,adminleftnavnum:""},actions:{loginAction:function(e){(0,e.commit)("changeLogin",1)}},mutations:{increment:function(e){e.count++},changeLogin:function(e,t){e.isLogin=t}}}),u=n("zL8q"),f=n.n(u),d=(n("tvR6"),n("mtWM")),c=n.n(d),m=n("QmSG");i.default.prototype.defines=m.a,i.default.config.productionTip=!1,i.default.use(f.a),i.default.prototype.$axios=c.a,c.a.defaults.withCredentials=!0,c.a.defaults.baseURL="http://192.168.11.200:18080/equator-field/",new i.default({el:"#app",router:l.a,store:s,components:{App:r},template:"<App/>"})},QmSG:function(e,t,n){"use strict";t.a={defaultActive:"1",errorType:2,setDefaultActive:function(e){this.defaultActive=e,console.log("defaultActive已经改变"+e)}}},S0PJ:function(e,t){},U8pn:function(e,t,n){"use strict";var i=n("Dod7"),a=(n("Xprb"),n("qNt1")),r={name:"FieldList",data:function(){return{form:{pageEnname:"",total:10,pageSize:10,currentPage:1},fieldData:[{field_id:"",field_name:"",field_enname:"",field_length:"",field_type:"",field_type_name:"",field_type_param:"",field_order_by:"",field_placeholder:"",field_rules:"",table_name:"",table_field:"",page_name:"",page_enname:"",page_entity:""}],languages:a.a.getLanguages(),locale:"zh_CN"}},props:{},watch:{value:function(e){}},created:function(){this.$store.state.adminleftnavnum="2"},mounted:function(){var e=this,t={size:this.form.pageSize};Object(i.b)("field",t).then(function(t){var n=t.response.data;e.fieldData=n.field_list.records,e.form.total=n.field_list.total,e.form.pageSize=n.field_list.size,e.form.currentPage=n.field_list.current}).catch(function(t){console.log("err:"+t),e.$message.error("["+t.status+"]"+t.message)})},methods:{handleCurrentChange:function(e){console.log("val:"+e),console.log("当前页: ${val}"+this.form.currentPage),this.form.currentPage=e,this.onSubmit(!1)},onSubmit:function(e){var t=this,n={current:e?1:this.form.currentPage,pageEnname:this.form.pageEnname,size:this.form.pageSize,locale:this.locale};Object(i.b)("field",n).then(function(e){var n=e.response.data;t.fieldData=n.field_list.records,t.form.total=n.field_list.total,t.form.pageSize=n.field_list.size,t.form.currentPage=n.field_list.current}).catch(function(e){console.log("err:"+e),t.$message.error("["+e.status+"]"+e.message)})},toEdit:function(e,t){this.$router.push({name:"FieldAdd",query:{fieldId:t,locale:this.locale}})},deleteField:function(e,t){var n=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a="field/"+t;Object(i.a)(a,{}).then(function(t){n.fieldData.splice(e,1),n.form.total=n.form.total-1,n.$message.success(t.message)}).catch(function(e){console.log("err:"+e),n.$message.error("["+e.status+"]"+e.message)})}).catch(function(){n.$message.info("已取消删除!")})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("el-form",{staticClass:"demo-form-inline",staticStyle:{"text-align":"left"},attrs:{inline:!0,model:e.form}},[n("el-form-item",{attrs:{label:"页面英文名称"}},[n("el-input",{attrs:{placeholder:"page_enname"},model:{value:e.form.pageEnname,callback:function(t){e.$set(e.form,"pageEnname",t)},expression:"form.pageEnname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"语言"}},[n("el-select",{model:{value:e.locale,callback:function(t){e.locale=t},expression:"locale"}},e._l(e.languages,function(e){return n("el-option",{key:e.key_value,attrs:{label:e.key_name,value:e.key_value}})}))],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit(!0)}}},[e._v("查询")])],1)],1),e._v(" "),n("el-table",{attrs:{data:e.fieldData,width:"100%",height:"500","default-sort":{prop:"field_id",order:"descending"}}},[n("el-table-column",{attrs:{prop:"field_name",sortable:"",label:"名称",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_enname",label:"英文名",width:"150",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_length",label:"长度",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_type_name",label:"类型",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_type_param",label:"类型参数",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_order_by",label:"排序",width:"50",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_placeholder",label:"占位符",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"field_rules",label:"验证规则",width:"500",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"table_name",label:"对应表名",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"table_field",label:"对应表字段",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"page_name",label:"页面名称",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"page_enname",label:"页面英文名",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"page_entity",label:"页面实体",width:"100",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.toEdit(t.$index,t.row.field_id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.deleteField(t.$index,t.row.field_id)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-pagination",{attrs:{"current-page":e.form.currentPage,"page-size":e.form.pageSize,layout:"total, prev, pager, next, jumper",total:e.form.total},on:{"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]},o=n("VU/8")(r,l,!1,null,null,null);t.a=o.exports},Xprb:function(e,t,n){"use strict";t.a={message:function(e,t){var n=e.status>=200&&e.status<300,i=n?"success":"failure",a=e.data&&e.data.messages&&e.data.messages.length,r=a?e.data.messages[a-1].msg:t;return{type:i,message:r=r||(n?"操作成功":"操作失败")}}}},YaEn:function(e,t,n){"use strict";(function(e){var i=n("7+uW"),a=n("/ocq"),r=n("Luci"),l=n("6DYt"),o=n("nKE/"),s=n("U8pn"),u=n("MBQ3");i.default.use(a.a);var f=[{path:"/",name:"Login",component:r.a},{path:"/main",component:l.a,children:[{path:"",redirect:"fields/FieldList"},{path:"fields/FieldAdd",name:"FieldAdd",component:o.a},{path:"fields/FieldList",name:"FieldList",component:s.a},{path:"fields/Test",name:"Test",component:u.a}]}],d=new a.a({base:e,scrollBehavior:function(){return{x:0,y:0}},routes:f});d.beforeEach(function(e,t,n){var i=sessionStorage.getItem("token");["FieldAdd","FieldList"].indexOf(e.name)>=0&&(null==i||""==i)?n({name:"Login"}):n()}),t.a=d}).call(t,"/")},ahdX:function(e,t){},ehPg:function(e,t){},"nKE/":function(e,t,n){"use strict";var i=n("mvHQ"),a=n.n(i),r=n("jwfv"),l={name:"fy-form",componentName:"FyForm",provide:function(){return{fyForm:this}},props:{model:Object,rules:Object},data:function(){return{fields:[],formError:{}}},created:function(){var e=this;this.$on("form.addField",function(t){t&&e.fields.push(t)}),this.$on("form.removeField",function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)})},watch:{},computed:{formRules:function(){var e=this,t={};return this.fields.forEach(function(n){var i=n.prop;if(!Array.isArray(e.rules[i]))return console.warn("prop 为 "+i+" 的 FormItem 校验规则不存在或者其值不是数组"),void(t[i]=[{required:!0}]);t[i]=e.rules[i]}),t},formValues:function(){var e=this;return this.fields.reduce(function(t,n){var i=n.prop;return t[i]=e.model[i],t},{})}},methods:{validate:function(e){var t=this;new r.a(this.rules);if(this.model){var n=!0,i=0;0===this.fields.length&&e&&e(!0);var a=[];return this.fields.forEach(function(r){r.validate("",!0,function(l,o){if(l){n=!1;var s={};s.message=l,s.prop=r.prop,a.push(s)}"function"==typeof e&&++i===t.fields.length&&e(n,a)})}),{valid:n,Fields:a}}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){var n=this.fields.filter(function(t){return t.prop===e})[0];if(!n)throw new Error("must call validateField with valid prop string!");n.validate("",!0,t)},resetFields:function(){this.model?this.fields.forEach(function(e){e.resetField()}):console.log("prop:model不能为空")}}},o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"fy-form-div"},[t("form",{staticClass:"fy-form"},[this._t("default")],2)])},staticRenderFns:[]};var s=n("VU/8")(l,o,!1,function(e){n("xBuD")},null,null).exports,u={methods:{dispatch:function(e,t,n){for(var i=this.$parent||this.$root,a=i.$options.componentName;i&&(!a||a!==e);)(i=i.parentNode)&&(a=i.$options.componentName);i&&i.$emit.apply(i,[t].concat(n))},customValidator:function(e,t){return e&&(e=e.filter(function(e){return e.confirmProp&&(e.validator=function(e,n,i){n!==t[e.confirmProp]?i(new Error(e.message)):i()}),e})),e}}},f={name:"fy-form-item",componentName:"FyFormItem",mixins:[u],provide:function(){return{fyFormItem:this}},inject:["fyForm"],data:function(){return{isShowErrot:!1,validateMessage:"",validateDisabled:!1,isSuccess:!1,styleTypeError:void 0===this.errorStyleType||null===this.errorStyleType?this.defines.errorType:this.errorStyleType,childVc:Object,requiredLabelData:this.requiredLabel}},props:{errorStyleType:{type:Number,default:null},requiredLabel:{type:Boolean,default:!1},label:String,prop:String,rules:[Object,Array],error:String},created:function(){var e=this;this.$on("formItem.addChildVc",function(t){t&&(e.childVc=t)})},mounted:function(){this.prop&&(this.dispatch("FyForm","form.addField",[this]),this.styleTypeError="FyCheckbox"==this.childVc.$options.componentName||"FyRadio"==this.childVc.$options.componentName||"FyInputDate"==this.childVc.$options.componentName?3:this.styleTypeError,this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange),this.$on("el.form.focus",this.onFieldFocus))},beforeUpdate:function(){this.requiredLabelData=this.isRequired},computed:{form:function(){for(var e=this.$parent,t=e.$options.componentName;"FyForm"!==t;)"FyFormItem"===t&&(this.isNested=!0),t=(e=e.$parent).$options.componentName;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),e[this.prop]}}},fieldError:function(){return this.prop&&this.form.formError[this.prop]||""},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every(function(e){return!e.required||1!=e.required||(t=!0,!1)}),t}},methods:{noop:function(){},resetField:function(){this.validateDisabled=!0,this.isSuccess=!1,this.validateMessage="",this.isShowErrot=!1,this.childVc.resetField()},validate:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.noop;this.validateDisabled=!1;var a=this.getFilteredRule(e);if(!a||0===a.length)return i(),!0;var l={};l[this.prop]=a;var o=new r.a(l),s={};s[this.prop]=this.fieldValue,o.validate(s,function(a,r){3!=n.styleTypeError&&t?n.isShowErrot=!1:n.isShowErrot=!!a,n.validateMessage=a?a[0].message:"","blur"!=e&&"change"!=e||(n.isSuccess=!a),a&&(console.log(">>>>>>>出错啦~~>>>>>>>"),console.log("message:"+a[0].message)),i(n.validateMessage,r)})},getRules:function(){var e=this.form.rules,t=this.rules;return e=e?e[this.prop]:[],e=this.customValidator(e,this.form.model),[].concat(t||e||[])},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||""===e||(Array.isArray(t.trigger)?t.trigger.indexOf(e)>-1:t.trigger===e)})},onFieldBlur:function(e){this.validate("blur"),!this.isShowErrot||1!=this.styleTypeError&&2!=this.styleTypeError||(this.isShowErrot=!1)},onFieldChange:function(e){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},onFieldFocus:function(e){this.validate("focus")}},beforeDestroy:function(){this.dispatch("ElForm","form.removeField",[this])}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fy-form-item"},[e.label?n("label",{staticClass:"fy-form-item-label",class:[{"fy-required-label":e.requiredLabelData}],attrs:{for:e.prop}},[e._v("\n    "+e._s(e.label)+"\n  ")]):e._e(),e._v(" "),n("div",{staticClass:"fy-form-item-content",class:[{"fy-error-form-item-content":e.validateMessage},{"fy-is-success":e.isSuccess}]},[e._t("default"),e._v(" "),e.isShowErrot?n("label",{class:[{"fy-error-popup":1==e.styleTypeError||2==e.styleTypeError},{"fy-error-popup-right":2==e.styleTypeError},{"fy-error-fixation":3==e.styleTypeError}]},[e._v("\n      "+e._s(e.validateMessage)+"\n    ")]):e._e()],2)])},staticRenderFns:[]};var c=n("VU/8")(f,d,!1,function(e){n("FsNF")},null,null).exports,m={name:"FyInput",componentName:"FyInput",mixins:[u],inject:{fyForm:{default:""},fyFormItem:{default:""}},data:function(){return{currentValue:void 0===this.value||null===this.value?"":this.value}},props:{value:[String,Number],type:{type:String,default:"text"},placeholder:{type:String,default:""}},watch:{value:function(e){this.setCurrentValue(e)},currentValue:function(e){this.$emit("input",e)}},mounted:function(){this.dispatch("FyFormItem","formItem.addChildVc",[this])},methods:{resetField:function(){this.$emit("input","")},setCurrentValue:function(e){e!==this.currentValue&&(this.currentValue=e)},handleFocus:function(e){var t=e.target.value;this.dispatch("FyFormItem","el.form.focus",[t])},handleInput:function(e){var t=e.target.value;this.$emit("input",t),this.dispatch("FyFormItem","el.form.change",[t])},handleChange:function(e){var t=e.target.value;this.$emit("change",t)},handleBlur:function(e){var t=e.target.value;this.dispatch("FyFormItem","el.form.blur",[t])}}},p={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",["checkbox"===e.type&&"textarea"!==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"input",staticClass:"fy-input",attrs:{placeholder:e.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(e.currentValue)?e._i(e.currentValue,null)>-1:e.currentValue},on:{focus:e.handleFocus,blur:e.handleBlur,change:[function(t){var n=e.currentValue,i=t.target,a=!!i.checked;if(Array.isArray(n)){var r=e._i(n,null);i.checked?r<0&&(e.currentValue=n.concat([null])):r>-1&&(e.currentValue=n.slice(0,r).concat(n.slice(r+1)))}else e.currentValue=a},e.handleChange],input:e.handleInput}}):"radio"===e.type&&"textarea"!==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"input",staticClass:"fy-input",attrs:{placeholder:e.placeholder,type:"radio"},domProps:{checked:e._q(e.currentValue,null)},on:{focus:e.handleFocus,blur:e.handleBlur,change:[function(t){e.currentValue=null},e.handleChange],input:e.handleInput}}):"textarea"!==e.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],ref:"input",staticClass:"fy-input",attrs:{placeholder:e.placeholder,type:e.type},domProps:{value:e.currentValue},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange,input:[function(t){t.target.composing||(e.currentValue=t.target.value)},e.handleInput]}}):n("textarea",{staticClass:"fy-input",attrs:{placeholder:e.placeholder},domProps:{value:e.currentValue},on:{focus:e.handleFocus,blur:e.handleBlur,change:e.handleChange,input:e.handleInput}})])},staticRenderFns:[]};var h=n("VU/8")(m,p,!1,function(e){n("0rG2")},null,null).exports,v={name:"FySelect",componentName:"FySelect",mixins:[u],inject:{fyForm:{default:""},fyFormItem:{default:""}},data:function(){return{currentValue:void 0===this.value||null===this.value?"":this.value}},props:{value:[String,Number],options:{type:Array,default:function(){return[]}},labelKey:String,valueKey:String},watch:{value:function(e){this.currentValue=e,this.$emit("change",e)}},mounted:function(){this.dispatch("FyFormItem","formItem.addChildVc",[this])},methods:{resetField:function(){this.$emit("input","")},handleInput:function(e){var t=e.target.value;this.$emit("input",t)},handleChange:function(e){var t=e.target.value;this.$emit("change",t),this.dispatch("FyFormItem","el.form.change",[t])},handleBlur:function(e){var t=e.target.value;this.dispatch("FyFormItem","el.form.blur",[t])}}},g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentValue,expression:"currentValue"}],staticClass:"fy-select",on:{blur:e.handleBlur,input:e.handleInput,change:[function(t){var n=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.currentValue=t.target.multiple?n:n[0]},e.handleChange]}},e._l(e.options,function(t,i){return n("option",{key:i,domProps:{value:t[e.valueKey]}},[e._v("\n    "+e._s(t[e.labelKey])+"\n  ")])}))},staticRenderFns:[]};var _=n("VU/8")(v,g,!1,function(e){n("ehPg")},null,null).exports,y={name:"FyCheckbox",componentName:"FyCheckbox",mixins:[u],inject:{fyForm:{default:""},fyFormItem:{default:""}},data:function(){return{checkeds:{},valueArray:this.value?[]:this.value.split(",")}},props:{name:String,value:{type:String,default:function(){return"FyCheckbox"}},options:{type:Array,default:function(){return[]}},labelKey:String,valueKey:String},watch:{value:function(e){this.valueArray=this.value.split(","),this.$emit("change",this.value),this.initOptions()}},mounted:function(){this.dispatch("FyFormItem","formItem.addChildVc",[this])},updated:function(){this.initOptions()},methods:{resetField:function(){this.$emit("input","")},initOptions:function(){this.options.length;for(var e=document.getElementsByName(this.name),t=0;t<this.options.length;t++)e[t].checked=-1!==this.valueArray.indexOf(this.options[t][this.valueKey])},handleFocus:function(e){this.dispatch("FyFormItem","el.form.focus",[this.value])},handleInput:function(e){this.$emit("input",this.value)},handleChange:function(e){if(e.target.checked)this.valueArray.push(e.target.value);else for(var t=0;t<this.valueArray.length;t++)if(this.valueArray[t]==e.target.value){this.valueArray.splice(t,1);break}var n=this.valueArray+"";this.$emit("input",n),this.dispatch("FyFormItem","el.form.change",[n])},handleBlur:function(e){this.dispatch("FyFormItem","el.form.blur",[this.value])}}},b={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fy-checkbox"},e._l(e.options,function(t,i){return n("span",{key:i,staticClass:"checkbox-span"},[n("input",{attrs:{type:"checkbox",name:e.name},domProps:{value:t[e.valueKey]},on:{change:e.handleChange}}),e._v(" "),n("label",[e._v(e._s(t[e.labelKey]))])])}))},staticRenderFns:[]};var F=n("VU/8")(y,b,!1,function(e){n("4+Gg")},null,null).exports,I={name:"FyRadio",mixins:[u],componentName:"FyRadio",inject:{fyForm:{default:""},fyFormItem:{default:""}},data:function(){return{}},props:{name:String,value:[String,Number],options:{type:Array,default:function(){return[]}},labelKey:String,valueKey:String},watch:{value:function(e){this.$emit("change",this.value),this.initOptions()}},mounted:function(){this.dispatch("FyFormItem","formItem.addChildVc",[this])},updated:function(){this.initOptions()},methods:{resetField:function(){this.$emit("input","")},initOptions:function(){this.options.length;for(var e=document.getElementsByName(this.name),t=0;t<this.options.length;t++)e[t].checked=-1!==this.value.indexOf(this.options[t][this.valueKey])},handleFocus:function(e){this.dispatch("FyFormItem","el.form.focus",[this.value])},handleInput:function(e){this.$emit("input",this.value)},handleChange:function(e){var t=e.target.value;this.$emit("change",t),this.$emit("input",t),this.dispatch("FyFormItem","el.form.change",[t])},handleBlur:function(e){this.dispatch("FyFormItem","el.form.blur",[this.value])}}},$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fy-radio"},e._l(e.options,function(t,i){return n("span",{key:i,staticClass:"radio-span"},[n("input",{attrs:{type:"radio",name:e.name},domProps:{value:t[e.valueKey]},on:{change:e.handleChange}}),e._v(" "),n("label",[e._v(e._s(t[e.labelKey]))])])}))},staticRenderFns:[]};var x=n("VU/8")(I,$,!1,function(e){n("x68X")},null,null).exports,w={name:"FyInputDate",componentName:"FyInputDate",mixins:[u],inject:{fyForm:{default:""},fyFormItem:{default:""}},data:function(){return{currentValue:void 0===this.value||null===this.value?null:new Date(this.value)}},props:{value:[String,Number],type:{type:String,default:"text"},placeholder:{type:String,default:""}},watch:{value:function(e){this.setCurrentValue(e)},currentValue:function(e){this.$emit("input",this.formatDate(e)),this.dispatch("FyFormItem","el.form.change",[this.formatDate(e)])}},mounted:function(){this.dispatch("FyFormItem","formItem.addChildVc",[this])},methods:{resetField:function(){},setCurrentValue:function(e){e!==this.formatDate(this.currentValue)&&(this.currentValue=""==e?null:new Date(e))},handleFocus:function(e){var t=e.target.value;this.dispatch("FyFormItem","el.form.focus",[this.formatDate(t)])},handleInput:function(e){var t=e.target.value;this.$emit("input",this.formatDate(t)),this.dispatch("FyFormItem","el.form.change",[this.formatDate(t)])},handleChange:function(e){var t=e.target.value;this.$emit("change",this.formatDate(t)),this.dispatch("FyFormItem","el.form.change",[this.formatDate(t)])},handleBlur:function(e){var t=e.target.value;this.dispatch("FyFormItem","el.form.blur",[this.formatDate(t)])},formatDate:function(e){if(e){var t=e.getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var i=e.getDate();return t+"-"+n+"-"+(i=i<10?"0"+i:i)}return""}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v2-datepicker",{staticStyle:{width:"100%"},model:{value:e.currentValue,callback:function(t){e.currentValue=t},expression:"currentValue"}})],1)},staticRenderFns:[]};var S=n("VU/8")(w,k,!1,function(e){n("S0PJ")},null,null).exports,V=n("qNt1"),C=(n("Xprb"),n("Dod7")),E={name:"FieldAdd",components:{FyForm:s,FyFormItem:c,FyInput:h,FySelect:_,FyCheckbox:F,FyRadio:x,FyInputDate:S},data:function(){return{fields:{field_id:{},field_name:{},field_enname:{},field_length:{},field_type:{},field_type_param:{},field_order_by:{},field_placeholder:{},field_rules:{},table_name:{},table_field:{},page_name:{},page_entity:{}},fieldInfo:{field_id:"",field_name:"",field_enname:"",field_length:"30",field_type:"1",field_type_param:"",field_order_by:"10",field_placeholder:"",field_rules:"",table_name:"",table_field:"",page_name:"",page_enname:"",page_entity:"",locale:"zh_CN"},rules:{field_name:[{}],field_enname:[{}],field_length:[{}],field_order_by:[{}]},field_type:[{key_name:"",key_value:""}],isEdit:!1,languages:V.a.getLanguages()}},watch:{fieldInfo:{handler:function(){sessionStorage.setItem("fieldInfo",a()(this.fieldInfo))},deep:!0}},computed:{},beforeCreate:function(){},created:function(){if(this.fieldInfo=JSON.parse(sessionStorage.getItem("fieldInfo"))||this.fieldInfo,this.$store.state.adminleftnavnum="1",""==this.fieldInfo.field_id){var e=this.$route.query.fieldId;void 0!=e&&(this.fieldInfo.locale=this.$route.query.locale,this.fieldInfo.field_id=e,this.getFieldById())}this.isEdit=""!=this.fieldInfo.field_id,V.a.init(this,"fields","fieldAdd")},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){this.reset(),sessionStorage.setItem("fieldInfo",a()(this.fieldInfo))},destroyed:function(){},methods:{getFieldById:function(){var e=this;if(""!=this.fieldInfo.field_id){this.isEdit=!0;var t="field/"+this.fieldInfo.field_id,n={locale:this.fieldInfo.locale};Object(C.b)(t,n).then(function(t){e.fieldInfo=t.response.data.field,e.fieldInfo.field_length=e.fieldInfo.field_length+"",e.fieldInfo.field_order_by=e.fieldInfo.field_order_by+"",e.fieldInfo.locale=e.$route.query.locale}).catch(function(t){console.log("err:"+t),e.$message.error("["+t.status+"]"+t.message)})}},validate:function(){return this.$refs.form.validate(function(e,t){})},add:function(){var e=this,t=this.validate();if(t.valid){var n=this.fieldInfo;Object(C.d)("field",n).then(function(t){e.$router.push({name:"FieldList"}),e.$message.success(t.message)}).catch(function(t){console.log("err1:"+t),e.$message.error("["+t.status+"]"+t.message)})}else this.$message.error(t.Fields[0].message)},returnList:function(){this.$router.push({name:"FieldList"})},update:function(){var e=this,t=this.fieldInfo;Object(C.e)("field",t).then(function(t){e.$router.push({name:"FieldList"}),e.$message.success(t.message)}).catch(function(t){console.log("err:"+t.message),e.$message.error("["+t.status+"]"+t.message)})},reset:function(){for(var e in this.$refs.form.resetFields(),this.fieldInfo)this.fieldInfo[e]="field_type"==e?"1":"field_length"==e?"30":"field_order_by"==e?"10":"locale"==e?"zh_CN":"";this.isEdit=!1}}},N={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"FieldAdd"},[n("fy-form",{ref:"form",attrs:{model:e.fieldInfo,rules:e.rules}},[n("fy-form-item",{attrs:{label:"语言"}},[n("fy-select",{attrs:{options:e.languages,labelKey:"key_name",valueKey:"key_value"},on:{change:e.getFieldById},model:{value:e.fieldInfo.locale,callback:function(t){e.$set(e.fieldInfo,"locale",t)},expression:"fieldInfo.locale"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.table_name.field_name,prop:"table_name"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.table_name.field_placeholder},model:{value:e.fieldInfo.table_name,callback:function(t){e.$set(e.fieldInfo,"table_name","string"==typeof t?t.trim():t)},expression:"fieldInfo.table_name"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.table_field.field_name,prop:"table_field"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.table_field.field_placeholder},model:{value:e.fieldInfo.table_field,callback:function(t){e.$set(e.fieldInfo,"table_field","string"==typeof t?t.trim():t)},expression:"fieldInfo.table_field"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.page_name.field_name,prop:"page_name"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.page_name.field_placeholder},model:{value:e.fieldInfo.page_name,callback:function(t){e.$set(e.fieldInfo,"page_name","string"==typeof t?t.trim():t)},expression:"fieldInfo.page_name"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_name.field_name,errorStyleType:3,prop:"field_name"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_name.field_placeholder},model:{value:e.fieldInfo.field_name,callback:function(t){e.$set(e.fieldInfo,"field_name","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_name"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_enname.field_name,prop:"field_enname"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_enname.field_placeholder},model:{value:e.fieldInfo.field_enname,callback:function(t){e.$set(e.fieldInfo,"field_enname","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_enname"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_length.field_name,prop:"field_length"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_length.field_placeholder},model:{value:e.fieldInfo.field_length,callback:function(t){e.$set(e.fieldInfo,"field_length","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_length"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_type.field_name,prop:"field_type"}},[n("fy-select",{attrs:{options:e.field_type,labelKey:"key_name",valueKey:"key_value"},model:{value:e.fieldInfo.field_type,callback:function(t){e.$set(e.fieldInfo,"field_type",t)},expression:"fieldInfo.field_type"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_type_param.field_name,prop:"field_type_param"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_type_param.field_placeholder},model:{value:e.fieldInfo.field_type_param,callback:function(t){e.$set(e.fieldInfo,"field_type_param","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_type_param"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_order_by.field_name,prop:"field_order_by"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_order_by.field_placeholder},model:{value:e.fieldInfo.field_order_by,callback:function(t){e.$set(e.fieldInfo,"field_order_by","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_order_by"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_placeholder.field_name,prop:"field_placeholder"}},[n("fy-input",{attrs:{type:"text",placeholder:e.fields.field_placeholder.field_placeholder},model:{value:e.fieldInfo.field_placeholder,callback:function(t){e.$set(e.fieldInfo,"field_placeholder","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_placeholder"}})],1),e._v(" "),n("fy-form-item",{attrs:{label:e.fields.field_rules.field_name,prop:"field_rules"}},[n("fy-input",{attrs:{type:"textarea",placeholder:e.fields.field_rules.field_placeholder},model:{value:e.fieldInfo.field_rules,callback:function(t){e.$set(e.fieldInfo,"field_rules","string"==typeof t?t.trim():t)},expression:"fieldInfo.field_rules"}})],1),e._v(" "),n("div",{staticClass:"form-submit"},[n("input",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{type:"button",value:"添加"},on:{click:e.add}}),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"button",value:"修改"},on:{click:e.update}}),e._v(" "),n("input",{attrs:{type:"button",value:"重置"},on:{click:e.reset}}),e._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{type:"button",value:"返回"},on:{click:e.returnList}})])],1)],1)},staticRenderFns:[]},A=n("VU/8")(E,N,!1,null,null,null);t.a=A.exports},qNt1:function(e,t,n){"use strict";var i=n("pFYg"),a=n.n(i),r=n("Dod7"),l={init:function(e,t,n){var i=this,a="page_field/"+n;Object(r.b)(a,{}).then(function(n){for(var a in console.log("field.js="+n.response.data.field_map),e[t]=n.response.data.field_map,e[t]){var r=e.fields[a];if(null!=r.field_rules&&void 0!=r.field_rules&&""!=r.field_rules){for(var l=JSON.parse(r.field_rules).rule_list,o=0;o<l.length;o++)l[o].hasOwnProperty("validator")&&(l[o].validator=i[l[o].validator]);e.rules[a]=l}null!=r.category_group&&void 0!=r.category_group&&(e[a]=r.category_group)}}).catch(function(t){console.log("err:"+t),e.$message.error("["+t.status+"]"+t.message)})},isJson:function(e,t,n){var i=!1;if(t||(i=!0),"string"==typeof t)try{var r=JSON.parse(t);"object"==(void 0===r?"undefined":a()(r))&&r&&(i=!0)}catch(e){console.log("error："+t+"!!!"+e)}i?n():n(new Error(e.message))},getLanguages:function(){return[{key_name:"中文",key_value:"zh_CN"},{key_name:"英文",key_value:"en_US"}]}};t.a=l},tvR6:function(e,t){},x68X:function(e,t){},xBuD:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.3bf9c3b2f7883d0855fb.js.map